% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pam.predicted_survial_eval_two_phase.R
\name{pam.predicted_survial_eval_two_phase}
\alias{pam.predicted_survial_eval_two_phase}
\title{Evaluate Survival Model Metrics for Two-Phase Sampling Designs}
\usage{
pam.predicted_survial_eval_two_phase(
  pred_results,
  t_star = NULL,
  tau = NULL,
  km_cens_fit,
  case_weights,
  metrics = c("Pesudo_R", "Harrell’s C", "Uno’s C", "Brier Score",
    "Time Dependent Auc")
)
}
\arguments{
\item{pred_results}{A numeric vector of predicted survival probabilities with (can be calculate by `pam.coxph_restricted()`) :
- `Prob`: predicted survival probabilities over time.
- `pred`: predicted risk scores.
- `time`: time points for `Prob` rows.
- `status`: indicating event occurrence (1 for event, 0 for censoring, 2 for competing events).}

\item{t_star}{(Optional) A numeric value specifying the evaluation time for Brier Score and time-dependent AUC. 
If NULL, it defaults to the median survival time.}

\item{tau}{(Optional) A numeric value specifying the truncation time for calculating explained variation metrics. 
If NULL, it defaults to the maximum observed survival time.}

\item{case_weights}{Numeric vector of case weights (from `weighted_param()`).}

\item{analysis_data}{A data frame containing the analysis dataset used in the fitted Cox model.
Must include `time` and `status` columns.}

\item{km_cens}{Kaplan–Meier estimate of censoring distribution (`survival::survfit` object).}
}
\value{
A tibble with columns:
  - `Metric`: name of metric
  - `Value`: numeric value
}
\description{
This function constructs a standardized evaluation dataset (`dat1`) from the
analysis dataset, predicted survival probabilities, and sampling weights, and
computes key performance metrics in a tidy table format.
Works for common two-phase sampling designs:
  - Case–cohort (unstratified or stratified)
  - Nested case–control (matched or unmatched)
}
\keyword{internal}
